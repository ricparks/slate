{
  "openapi" : "3.0.1",
  "info" : {
    "title" : "Wisetack API",
    "version" : "1.1.1",
    "description" : "## Introduction\nWith Wisetack customers can pay over time for a purchase, and a business gets paid upfront. The Wisetack APIs enable seamless integration of consumer financing options\nwithin another system serving businesses and their customers. Here's a brief overview of the APIs:\n\n* **Transactions** initiates a transaction between a specific business and a customer.\nThe Transaction resource also allows tracking and updating the flow of the transaction through authorization and settlement.\n\n* **PaymentLink** allows a specific type of transaction that starts from an HTML link embedded in an invoice or payment flow. This\nlink will initiate a transaction that is session specific for that invoice.\n\n* **Merchants** allows enabling merchants to offer financing as a payment option, listing existing merchants based on\ndate and status filters, getting information on a merchant, and removing merchants from the system.\n\n## Authentication\nWisetack uses HTTP Basic Authentication with both an application token and a secret key. When you initially create\na Wisetack account, you'll be given an application token and a secret key for both the production system\nand a test system.  You'll be able to distinguish between the two keys easily by their prefix. Production keys\nstart with ws_prod_ and the test system keys are prefixed by ws_test_.\nIf you use one of our language SDK's you don't need to worry about the specifics of authentication but if you\nwant to build authentication in to your own RESTful calls, you simply add the keys to the header like this:\n\n1. Concatenate the application token and secret key separated by a colon.\n\n2. Base64 encode the resulting string.\n\n3. Pass the result in the authorization header, prefixed with the word Basic.\n\nThis process will result in a header that looks something like this: \\\n**Authorization: Basic ZHBERDZ6NG9sT1NJN040Zk1Dc0FsS2pGYTdyZUJZaHU6b0ptM25pUVgxUGR5NRNDU=**\n"
  },
  "security" : [ {
    "BasicAuth" : [ ]
  } ],
  "tags" : [ {
    "name" : "Transactions",
    "description" : "The Transaction resource initiates transactions and manages the flow of authorization, settlement, and refunds.\n"
  }, {
    "name" : "PaymentLink",
    "description" : "PaymentLink allows a specific type of transaction that starts from an HTML link embedded in an invoice\nor payment flow. This link will initiate a transaction that is session specific for that invoice.\n"
  }, {
    "name" : "Merchants",
    "description" : "The Merchant resource allows you to to list all merchants and to get information on individual merchants.\n"
  } ],
  "x-cors-headers" : {
    "method.response.header.Access-Control-Allow-Headers" : "'Content-Type,X-Amz-Date,Authorization,X-IO-Blackbox'",
    "method.response.header.Access-Control-Allow-Methods" : "'GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH'",
    "method.response.header.Access-Control-Allow-Origin" : "'*'"
  },
  "x-api-response-parameters" : {
    "responseParameters" : {
      "method.response.header.Access-Control-Allow-Headers" : "'Content-Type,X-Amz-Date,Authorization,X-IO-Blackbox'",
      "method.response.header.Access-Control-Allow-Methods" : "'GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH'",
      "method.response.header.Access-Control-Allow-Origin" : "'*'"
    }
  },
  "x-cors-options" : {
    "options" : {
      "summary" : "CORS support",
      "description" : "Enable CORS by returning correct headers"
    }
  },
  "x-api-request-template" : {
    "application/json" : "#set($allParams = $input.params()) {\"apiContext\":{\"apiId\":\"$context.apiId\", \"method\":\"$context.httpMethod\", \"sourceIp\":\"$context.identity.sourceIp\", \"userAgent\":\"$context.identity.userAgent\", \"path\":\"$context.path\", \"protocol\":\"$context.protocol\", \"requestId\":\"$context.requestId\", \"stage\":\"$context.stage\"}, #foreach($type in $allParams.keySet()) #set($params = $allParams.get($type)) \"$type\" : { \"parameterMap\" : { #foreach($paramName in $params.keySet()) \"$paramName\" : \"$util.escapeJavaScript($params.get($paramName))\" #if($foreach.hasNext), #end #end}}, #end \"body\" : $input.json('$')}"
  },
  "x-api-response-template" : {
    "application/json" : "#set ($errorMessageObj = $util.parseJson($input.path('$.errorMessage')))\n{\n  \"type\" : \"$errorMessageObj.errorType\",\n  \"message\" : \"$errorMessageObj.message\",\n  \"request-id\" : \"$errorMessageObj.requestId\"\n}"
  },
  "x-api-error-response" : {
    "responseParameters" : {
      "method.response.header.Access-Control-Allow-Headers" : "'Content-Type,X-Amz-Date,Authorization,X-IO-Blackbox'",
      "method.response.header.Access-Control-Allow-Methods" : "'GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH'",
      "method.response.header.Access-Control-Allow-Origin" : "'*'"
    },
    "responseTemplates" : {
      "application/json" : "#set ($errorMessageObj = $util.parseJson($input.path('$.errorMessage')))\n{\n  \"type\" : \"$errorMessageObj.errorType\",\n  \"message\" : \"$errorMessageObj.message\",\n  \"request-id\" : \"$errorMessageObj.requestId\"\n}"
    }
  },
  "x-api-setup-with-standard-errors" : {
    "httpMethod" : "POST",
    "requestTemplates" : {
      "application/json" : "#set($allParams = $input.params()) {\"apiContext\":{\"apiId\":\"$context.apiId\", \"method\":\"$context.httpMethod\", \"sourceIp\":\"$context.identity.sourceIp\", \"userAgent\":\"$context.identity.userAgent\", \"path\":\"$context.path\", \"protocol\":\"$context.protocol\", \"requestId\":\"$context.requestId\", \"stage\":\"$context.stage\"}, #foreach($type in $allParams.keySet()) #set($params = $allParams.get($type)) \"$type\" : { \"parameterMap\" : { #foreach($paramName in $params.keySet()) \"$paramName\" : \"$util.escapeJavaScript($params.get($paramName))\" #if($foreach.hasNext), #end #end}}, #end \"body\" : $input.json('$')}"
    },
    "responses" : {
      "default" : {
        "statusCode" : "200",
        "responseParameters" : {
          "method.response.header.Access-Control-Allow-Headers" : "'Content-Type,X-Amz-Date,Authorization,X-IO-Blackbox'",
          "method.response.header.Access-Control-Allow-Methods" : "'GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH'",
          "method.response.header.Access-Control-Allow-Origin" : "'*'"
        }
      },
      ".*httpStatus\\\":400.*" : {
        "statusCode" : "400",
        "responseParameters" : {
          "method.response.header.Access-Control-Allow-Headers" : "'Content-Type,X-Amz-Date,Authorization,X-IO-Blackbox'",
          "method.response.header.Access-Control-Allow-Methods" : "'GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH'",
          "method.response.header.Access-Control-Allow-Origin" : "'*'"
        },
        "responseTemplates" : {
          "application/json" : "#set ($errorMessageObj = $util.parseJson($input.path('$.errorMessage')))\n{\n  \"type\" : \"$errorMessageObj.errorType\",\n  \"message\" : \"$errorMessageObj.message\",\n  \"request-id\" : \"$errorMessageObj.requestId\"\n}"
        }
      },
      ".*httpStatus\\\":401.*" : {
        "statusCode" : "401",
        "responseParameters" : {
          "method.response.header.Access-Control-Allow-Headers" : "'Content-Type,X-Amz-Date,Authorization,X-IO-Blackbox'",
          "method.response.header.Access-Control-Allow-Methods" : "'GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH'",
          "method.response.header.Access-Control-Allow-Origin" : "'*'"
        },
        "responseTemplates" : {
          "application/json" : "#set ($errorMessageObj = $util.parseJson($input.path('$.errorMessage')))\n{\n  \"type\" : \"$errorMessageObj.errorType\",\n  \"message\" : \"$errorMessageObj.message\",\n  \"request-id\" : \"$errorMessageObj.requestId\"\n}"
        }
      },
      ".*httpStatus\\\":403.*" : {
        "statusCode" : "403",
        "responseParameters" : {
          "method.response.header.Access-Control-Allow-Headers" : "'Content-Type,X-Amz-Date,Authorization,X-IO-Blackbox'",
          "method.response.header.Access-Control-Allow-Methods" : "'GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH'",
          "method.response.header.Access-Control-Allow-Origin" : "'*'"
        },
        "responseTemplates" : {
          "application/json" : "#set ($errorMessageObj = $util.parseJson($input.path('$.errorMessage')))\n{\n  \"type\" : \"$errorMessageObj.errorType\",\n  \"message\" : \"$errorMessageObj.message\",\n  \"request-id\" : \"$errorMessageObj.requestId\"\n}"
        }
      },
      ".*httpStatus\\\":404.*" : {
        "statusCode" : "404",
        "responseParameters" : {
          "method.response.header.Access-Control-Allow-Headers" : "'Content-Type,X-Amz-Date,Authorization,X-IO-Blackbox'",
          "method.response.header.Access-Control-Allow-Methods" : "'GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH'",
          "method.response.header.Access-Control-Allow-Origin" : "'*'"
        },
        "responseTemplates" : {
          "application/json" : "#set ($errorMessageObj = $util.parseJson($input.path('$.errorMessage')))\n{\n  \"type\" : \"$errorMessageObj.errorType\",\n  \"message\" : \"$errorMessageObj.message\",\n  \"request-id\" : \"$errorMessageObj.requestId\"\n}"
        }
      },
      ".*httpStatus\\\":409.*" : {
        "statusCode" : "409",
        "responseParameters" : {
          "method.response.header.Access-Control-Allow-Headers" : "'Content-Type,X-Amz-Date,Authorization,X-IO-Blackbox'",
          "method.response.header.Access-Control-Allow-Methods" : "'GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH'",
          "method.response.header.Access-Control-Allow-Origin" : "'*'"
        },
        "responseTemplates" : {
          "application/json" : "#set ($errorMessageObj = $util.parseJson($input.path('$.errorMessage')))\n{\n  \"type\" : \"$errorMessageObj.errorType\",\n  \"message\" : \"$errorMessageObj.message\",\n  \"request-id\" : \"$errorMessageObj.requestId\"\n}"
        }
      },
      ".*httpStatus\\\":500.*" : {
        "statusCode" : "500",
        "responseParameters" : {
          "method.response.header.Access-Control-Allow-Headers" : "'Content-Type,X-Amz-Date,Authorization,X-IO-Blackbox'",
          "method.response.header.Access-Control-Allow-Methods" : "'GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH'",
          "method.response.header.Access-Control-Allow-Origin" : "'*'"
        },
        "responseTemplates" : {
          "application/json" : "#set ($errorMessageObj = $util.parseJson($input.path('$.errorMessage')))\n{\n  \"type\" : \"$errorMessageObj.errorType\",\n  \"message\" : \"$errorMessageObj.message\",\n  \"request-id\" : \"$errorMessageObj.requestId\"\n}"
        }
      }
    },
    "type" : "aws"
  },
  "x-standard-headers" : {
    "headers" : {
      "Access-Control-Allow-Headers" : {
        "$ref" : "#/components/headers/accessControl"
      },
      "Access-Control-Allow-Methods" : {
        "$ref" : "#/components/headers/accessControl"
      },
      "Access-Control-Allow-Origin" : {
        "$ref" : "#/components/headers/accessControl"
      }
    }
  },
  "x-standard-error-response" : {
    "headers" : {
      "Access-Control-Allow-Headers" : {
        "$ref" : "#/components/headers/accessControl"
      },
      "Access-Control-Allow-Methods" : {
        "$ref" : "#/components/headers/accessControl"
      },
      "Access-Control-Allow-Origin" : {
        "$ref" : "#/components/headers/accessControl"
      }
    },
    "content" : {
      "application/json" : {
        "schema" : {
          "$ref" : "#/components/schemas/Error"
        }
      }
    }
  },
  "x-standard-error-responses" : {
    "400" : {
      "description" : "Bad Request."
    }
  },
  "paths" : {
    "/merchants/{merchantId}/transactions" : {
      "summary" : "Initiates a transaction process.",
      "description" : "The Transactions resource initiates a transcation and manages the flow of authorization, settlement, and refunds.",
      "parameters" : [ {
        "in" : "path",
        "name" : "merchantId",
        "schema" : {
          "type" : "string"
        },
        "required" : true
      } ],
      "options" : {
        "summary" : "CORS support",
        "description" : "Enable CORS by returning correct headers"
      },
      "post" : {
        "summary" : "POST initiates a transaction process.",
        "description" : "When a transaction is initiated, the customer receives a text message with a link to their application. They can follow the link to complete a short, mobile-optimized flow. To start a transaction, the\nmerchant must provide the mobile number of the customer, a transaction amount, and the purpose of the transaction.\n\nThe POST can also include an array of line items to describe the services or products provided as\nwell as other optional data described in the TransactionObject. These are optional. We recommend including as much information as possible as the data helps create a better user experience, allows better transaction reporting and reconciliation for the business and customer.\nThe following values are required for the POST:\n\n* a United States domestic mobile phone number is required.\n\n* a transaction amount is required.\n\n* a transaction purpose is required.\n\n* the date on which the service is to be completed is required.\n",
        "tags" : [ "Transactions" ],
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/TransactionRequest"
              }
            }
          },
          "required" : true
        },
        "responses" : {
          "200" : {
            "description" : "Ok",
            "headers" : {
              "Access-Control-Allow-Headers" : {
                "$ref" : "#/components/headers/accessControl"
              },
              "Access-Control-Allow-Methods" : {
                "$ref" : "#/components/headers/accessControl"
              },
              "Access-Control-Allow-Origin" : {
                "$ref" : "#/components/headers/accessControl"
              }
            },
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/TransactionResponse"
                }
              }
            }
          },
          "400" : {
            "description" : "Bad Request."
          }
        },
        "x-amazon-apigateway-integration" : {
          "uri" : "${lambda-arn-LoanApplicationLambda}",
          "credentials" : "${api-role-arn}",
          "httpMethod" : "POST",
          "requestTemplates" : {
            "application/json" : "#set($allParams = $input.params()) {\"apiContext\":{\"apiId\":\"$context.apiId\", \"method\":\"$context.httpMethod\", \"sourceIp\":\"$context.identity.sourceIp\", \"userAgent\":\"$context.identity.userAgent\", \"path\":\"$context.path\", \"protocol\":\"$context.protocol\", \"requestId\":\"$context.requestId\", \"stage\":\"$context.stage\"}, #foreach($type in $allParams.keySet()) #set($params = $allParams.get($type)) \"$type\" : { \"parameterMap\" : { #foreach($paramName in $params.keySet()) \"$paramName\" : \"$util.escapeJavaScript($params.get($paramName))\" #if($foreach.hasNext), #end #end}}, #end \"body\" : $input.json('$')}"
          },
          "responses" : {
            "default" : {
              "statusCode" : "200",
              "responseParameters" : {
                "method.response.header.Access-Control-Allow-Headers" : "'Content-Type,X-Amz-Date,Authorization,X-IO-Blackbox'",
                "method.response.header.Access-Control-Allow-Methods" : "'GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH'",
                "method.response.header.Access-Control-Allow-Origin" : "'*'"
              }
            },
            ".*httpStatus\\\":400.*" : {
              "statusCode" : "400",
              "responseParameters" : {
                "method.response.header.Access-Control-Allow-Headers" : "'Content-Type,X-Amz-Date,Authorization,X-IO-Blackbox'",
                "method.response.header.Access-Control-Allow-Methods" : "'GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH'",
                "method.response.header.Access-Control-Allow-Origin" : "'*'"
              },
              "responseTemplates" : {
                "application/json" : "#set ($errorMessageObj = $util.parseJson($input.path('$.errorMessage')))\n{\n  \"type\" : \"$errorMessageObj.errorType\",\n  \"message\" : \"$errorMessageObj.message\",\n  \"request-id\" : \"$errorMessageObj.requestId\"\n}"
              }
            },
            ".*httpStatus\\\":401.*" : {
              "statusCode" : "401",
              "responseParameters" : {
                "method.response.header.Access-Control-Allow-Headers" : "'Content-Type,X-Amz-Date,Authorization,X-IO-Blackbox'",
                "method.response.header.Access-Control-Allow-Methods" : "'GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH'",
                "method.response.header.Access-Control-Allow-Origin" : "'*'"
              },
              "responseTemplates" : {
                "application/json" : "#set ($errorMessageObj = $util.parseJson($input.path('$.errorMessage')))\n{\n  \"type\" : \"$errorMessageObj.errorType\",\n  \"message\" : \"$errorMessageObj.message\",\n  \"request-id\" : \"$errorMessageObj.requestId\"\n}"
              }
            },
            ".*httpStatus\\\":403.*" : {
              "statusCode" : "403",
              "responseParameters" : {
                "method.response.header.Access-Control-Allow-Headers" : "'Content-Type,X-Amz-Date,Authorization,X-IO-Blackbox'",
                "method.response.header.Access-Control-Allow-Methods" : "'GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH'",
                "method.response.header.Access-Control-Allow-Origin" : "'*'"
              },
              "responseTemplates" : {
                "application/json" : "#set ($errorMessageObj = $util.parseJson($input.path('$.errorMessage')))\n{\n  \"type\" : \"$errorMessageObj.errorType\",\n  \"message\" : \"$errorMessageObj.message\",\n  \"request-id\" : \"$errorMessageObj.requestId\"\n}"
              }
            },
            ".*httpStatus\\\":404.*" : {
              "statusCode" : "404",
              "responseParameters" : {
                "method.response.header.Access-Control-Allow-Headers" : "'Content-Type,X-Amz-Date,Authorization,X-IO-Blackbox'",
                "method.response.header.Access-Control-Allow-Methods" : "'GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH'",
                "method.response.header.Access-Control-Allow-Origin" : "'*'"
              },
              "responseTemplates" : {
                "application/json" : "#set ($errorMessageObj = $util.parseJson($input.path('$.errorMessage')))\n{\n  \"type\" : \"$errorMessageObj.errorType\",\n  \"message\" : \"$errorMessageObj.message\",\n  \"request-id\" : \"$errorMessageObj.requestId\"\n}"
              }
            },
            ".*httpStatus\\\":409.*" : {
              "statusCode" : "409",
              "responseParameters" : {
                "method.response.header.Access-Control-Allow-Headers" : "'Content-Type,X-Amz-Date,Authorization,X-IO-Blackbox'",
                "method.response.header.Access-Control-Allow-Methods" : "'GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH'",
                "method.response.header.Access-Control-Allow-Origin" : "'*'"
              },
              "responseTemplates" : {
                "application/json" : "#set ($errorMessageObj = $util.parseJson($input.path('$.errorMessage')))\n{\n  \"type\" : \"$errorMessageObj.errorType\",\n  \"message\" : \"$errorMessageObj.message\",\n  \"request-id\" : \"$errorMessageObj.requestId\"\n}"
              }
            },
            ".*httpStatus\\\":500.*" : {
              "statusCode" : "500",
              "responseParameters" : {
                "method.response.header.Access-Control-Allow-Headers" : "'Content-Type,X-Amz-Date,Authorization,X-IO-Blackbox'",
                "method.response.header.Access-Control-Allow-Methods" : "'GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH'",
                "method.response.header.Access-Control-Allow-Origin" : "'*'"
              },
              "responseTemplates" : {
                "application/json" : "#set ($errorMessageObj = $util.parseJson($input.path('$.errorMessage')))\n{\n  \"type\" : \"$errorMessageObj.errorType\",\n  \"message\" : \"$errorMessageObj.message\",\n  \"request-id\" : \"$errorMessageObj.requestId\"\n}"
              }
            }
          },
          "type" : "aws"
        }
      }
    },
    "/merchant/{merchantId}/transactions" : {
      "get" : {
        "summary" : "GET returns a list of transactions for this merchant.",
        "description" : "Returns a list of all the transactions for this merchant.\nA filter can be supplied using a query string to limit the list to a date range, status, or number of items.\n",
        "tags" : [ "Transactions" ],
        "parameters" : [ {
          "in" : "path",
          "name" : "merchantId",
          "description" : "Id for the merchant originating the transaction.",
          "required" : true,
          "schema" : {
            "type" : "string"
          }
        }, {
          "in" : "query",
          "name" : "limit",
          "description" : "Maximum number of transactions to return.",
          "schema" : {
            "type" : "integer"
          },
          "required" : false
        }, {
          "in" : "query",
          "name" : "startingAfter",
          "description" : "List only transactions that were initiated after this date.",
          "schema" : {
            "type" : "string"
          },
          "required" : false
        }, {
          "in" : "query",
          "name" : "endingBefore",
          "description" : "List only transactions that were initiated before this date.",
          "schema" : {
            "type" : "string"
          },
          "required" : false
        }, {
          "in" : "query",
          "name" : "status",
          "description" : "List only transactions with this status code.",
          "schema" : {
            "type" : "string"
          },
          "required" : false
        } ],
        "options" : {
          "summary" : "CORS support",
          "description" : "Enable CORS by returning correct headers"
        },
        "responses" : {
          "200" : {
            "description" : "Ok",
            "headers" : {
              "Access-Control-Allow-Headers" : {
                "$ref" : "#/components/headers/accessControl"
              },
              "Access-Control-Allow-Methods" : {
                "$ref" : "#/components/headers/accessControl"
              },
              "Access-Control-Allow-Origin" : {
                "$ref" : "#/components/headers/accessControl"
              }
            },
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/MerchantTransactionsResponse"
                }
              }
            }
          },
          "400" : {
            "description" : "Bad Request."
          }
        },
        "x-amazon-apigateway-integration" : {
          "uri" : "${lambda-arn-LoanQueryByMerchantIdLambda}",
          "credentials" : "${api-role-arn}",
          "httpMethod" : "POST",
          "requestTemplates" : {
            "application/json" : "#set($allParams = $input.params()) {\"apiContext\":{\"apiId\":\"$context.apiId\", \"method\":\"$context.httpMethod\", \"sourceIp\":\"$context.identity.sourceIp\", \"userAgent\":\"$context.identity.userAgent\", \"path\":\"$context.path\", \"protocol\":\"$context.protocol\", \"requestId\":\"$context.requestId\", \"stage\":\"$context.stage\"}, #foreach($type in $allParams.keySet()) #set($params = $allParams.get($type)) \"$type\" : { \"parameterMap\" : { #foreach($paramName in $params.keySet()) \"$paramName\" : \"$util.escapeJavaScript($params.get($paramName))\" #if($foreach.hasNext), #end #end}}, #end \"body\" : $input.json('$')}"
          },
          "responses" : {
            "default" : {
              "statusCode" : "200",
              "responseParameters" : {
                "method.response.header.Access-Control-Allow-Headers" : "'Content-Type,X-Amz-Date,Authorization,X-IO-Blackbox'",
                "method.response.header.Access-Control-Allow-Methods" : "'GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH'",
                "method.response.header.Access-Control-Allow-Origin" : "'*'"
              }
            },
            ".*httpStatus\\\":400.*" : {
              "statusCode" : "400",
              "responseParameters" : {
                "method.response.header.Access-Control-Allow-Headers" : "'Content-Type,X-Amz-Date,Authorization,X-IO-Blackbox'",
                "method.response.header.Access-Control-Allow-Methods" : "'GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH'",
                "method.response.header.Access-Control-Allow-Origin" : "'*'"
              },
              "responseTemplates" : {
                "application/json" : "#set ($errorMessageObj = $util.parseJson($input.path('$.errorMessage')))\n{\n  \"type\" : \"$errorMessageObj.errorType\",\n  \"message\" : \"$errorMessageObj.message\",\n  \"request-id\" : \"$errorMessageObj.requestId\"\n}"
              }
            },
            ".*httpStatus\\\":401.*" : {
              "statusCode" : "401",
              "responseParameters" : {
                "method.response.header.Access-Control-Allow-Headers" : "'Content-Type,X-Amz-Date,Authorization,X-IO-Blackbox'",
                "method.response.header.Access-Control-Allow-Methods" : "'GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH'",
                "method.response.header.Access-Control-Allow-Origin" : "'*'"
              },
              "responseTemplates" : {
                "application/json" : "#set ($errorMessageObj = $util.parseJson($input.path('$.errorMessage')))\n{\n  \"type\" : \"$errorMessageObj.errorType\",\n  \"message\" : \"$errorMessageObj.message\",\n  \"request-id\" : \"$errorMessageObj.requestId\"\n}"
              }
            },
            ".*httpStatus\\\":403.*" : {
              "statusCode" : "403",
              "responseParameters" : {
                "method.response.header.Access-Control-Allow-Headers" : "'Content-Type,X-Amz-Date,Authorization,X-IO-Blackbox'",
                "method.response.header.Access-Control-Allow-Methods" : "'GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH'",
                "method.response.header.Access-Control-Allow-Origin" : "'*'"
              },
              "responseTemplates" : {
                "application/json" : "#set ($errorMessageObj = $util.parseJson($input.path('$.errorMessage')))\n{\n  \"type\" : \"$errorMessageObj.errorType\",\n  \"message\" : \"$errorMessageObj.message\",\n  \"request-id\" : \"$errorMessageObj.requestId\"\n}"
              }
            },
            ".*httpStatus\\\":404.*" : {
              "statusCode" : "404",
              "responseParameters" : {
                "method.response.header.Access-Control-Allow-Headers" : "'Content-Type,X-Amz-Date,Authorization,X-IO-Blackbox'",
                "method.response.header.Access-Control-Allow-Methods" : "'GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH'",
                "method.response.header.Access-Control-Allow-Origin" : "'*'"
              },
              "responseTemplates" : {
                "application/json" : "#set ($errorMessageObj = $util.parseJson($input.path('$.errorMessage')))\n{\n  \"type\" : \"$errorMessageObj.errorType\",\n  \"message\" : \"$errorMessageObj.message\",\n  \"request-id\" : \"$errorMessageObj.requestId\"\n}"
              }
            },
            ".*httpStatus\\\":409.*" : {
              "statusCode" : "409",
              "responseParameters" : {
                "method.response.header.Access-Control-Allow-Headers" : "'Content-Type,X-Amz-Date,Authorization,X-IO-Blackbox'",
                "method.response.header.Access-Control-Allow-Methods" : "'GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH'",
                "method.response.header.Access-Control-Allow-Origin" : "'*'"
              },
              "responseTemplates" : {
                "application/json" : "#set ($errorMessageObj = $util.parseJson($input.path('$.errorMessage')))\n{\n  \"type\" : \"$errorMessageObj.errorType\",\n  \"message\" : \"$errorMessageObj.message\",\n  \"request-id\" : \"$errorMessageObj.requestId\"\n}"
              }
            },
            ".*httpStatus\\\":500.*" : {
              "statusCode" : "500",
              "responseParameters" : {
                "method.response.header.Access-Control-Allow-Headers" : "'Content-Type,X-Amz-Date,Authorization,X-IO-Blackbox'",
                "method.response.header.Access-Control-Allow-Methods" : "'GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH'",
                "method.response.header.Access-Control-Allow-Origin" : "'*'"
              },
              "responseTemplates" : {
                "application/json" : "#set ($errorMessageObj = $util.parseJson($input.path('$.errorMessage')))\n{\n  \"type\" : \"$errorMessageObj.errorType\",\n  \"message\" : \"$errorMessageObj.message\",\n  \"request-id\" : \"$errorMessageObj.requestId\"\n}"
              }
            }
          },
          "type" : "aws"
        }
      }
    },
    "/transactions/{transactionId}" : {
      "description" : "Get merchant transactions by transaction ID",
      "parameters" : [ {
        "in" : "path",
        "name" : "transactionId",
        "description" : "UUID Id for the transaction. Acquired during the POST to create the transaction.",
        "schema" : {
          "type" : "string"
        },
        "required" : true
      } ],
      "options" : {
        "summary" : "CORS support",
        "description" : "Enable CORS by returning correct headers"
      },
      "get" : {
        "summary" : "GET retrieves information, including the status, on a specific transaction.",
        "tags" : [ "Transactions" ],
        "responses" : {
          "200" : {
            "description" : "Ok",
            "headers" : {
              "Access-Control-Allow-Headers" : {
                "$ref" : "#/components/headers/accessControl"
              },
              "Access-Control-Allow-Methods" : {
                "$ref" : "#/components/headers/accessControl"
              },
              "Access-Control-Allow-Origin" : {
                "$ref" : "#/components/headers/accessControl"
              }
            },
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/MerchantTransactionsResponse"
                }
              }
            }
          },
          "400" : {
            "description" : "Bad Request."
          }
        },
        "x-amazon-apigateway-integration" : {
          "uri" : "${lambda-arn-LoanQueryByMerchantTransactionLambda}",
          "credentials" : "${api-role-arn}",
          "httpMethod" : "POST",
          "requestTemplates" : {
            "application/json" : "#set($allParams = $input.params()) {\"apiContext\":{\"apiId\":\"$context.apiId\", \"method\":\"$context.httpMethod\", \"sourceIp\":\"$context.identity.sourceIp\", \"userAgent\":\"$context.identity.userAgent\", \"path\":\"$context.path\", \"protocol\":\"$context.protocol\", \"requestId\":\"$context.requestId\", \"stage\":\"$context.stage\"}, #foreach($type in $allParams.keySet()) #set($params = $allParams.get($type)) \"$type\" : { \"parameterMap\" : { #foreach($paramName in $params.keySet()) \"$paramName\" : \"$util.escapeJavaScript($params.get($paramName))\" #if($foreach.hasNext), #end #end}}, #end \"body\" : $input.json('$')}"
          },
          "responses" : {
            "default" : {
              "statusCode" : "200",
              "responseParameters" : {
                "method.response.header.Access-Control-Allow-Headers" : "'Content-Type,X-Amz-Date,Authorization,X-IO-Blackbox'",
                "method.response.header.Access-Control-Allow-Methods" : "'GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH'",
                "method.response.header.Access-Control-Allow-Origin" : "'*'"
              }
            },
            ".*httpStatus\\\":400.*" : {
              "statusCode" : "400",
              "responseParameters" : {
                "method.response.header.Access-Control-Allow-Headers" : "'Content-Type,X-Amz-Date,Authorization,X-IO-Blackbox'",
                "method.response.header.Access-Control-Allow-Methods" : "'GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH'",
                "method.response.header.Access-Control-Allow-Origin" : "'*'"
              },
              "responseTemplates" : {
                "application/json" : "#set ($errorMessageObj = $util.parseJson($input.path('$.errorMessage')))\n{\n  \"type\" : \"$errorMessageObj.errorType\",\n  \"message\" : \"$errorMessageObj.message\",\n  \"request-id\" : \"$errorMessageObj.requestId\"\n}"
              }
            },
            ".*httpStatus\\\":401.*" : {
              "statusCode" : "401",
              "responseParameters" : {
                "method.response.header.Access-Control-Allow-Headers" : "'Content-Type,X-Amz-Date,Authorization,X-IO-Blackbox'",
                "method.response.header.Access-Control-Allow-Methods" : "'GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH'",
                "method.response.header.Access-Control-Allow-Origin" : "'*'"
              },
              "responseTemplates" : {
                "application/json" : "#set ($errorMessageObj = $util.parseJson($input.path('$.errorMessage')))\n{\n  \"type\" : \"$errorMessageObj.errorType\",\n  \"message\" : \"$errorMessageObj.message\",\n  \"request-id\" : \"$errorMessageObj.requestId\"\n}"
              }
            },
            ".*httpStatus\\\":403.*" : {
              "statusCode" : "403",
              "responseParameters" : {
                "method.response.header.Access-Control-Allow-Headers" : "'Content-Type,X-Amz-Date,Authorization,X-IO-Blackbox'",
                "method.response.header.Access-Control-Allow-Methods" : "'GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH'",
                "method.response.header.Access-Control-Allow-Origin" : "'*'"
              },
              "responseTemplates" : {
                "application/json" : "#set ($errorMessageObj = $util.parseJson($input.path('$.errorMessage')))\n{\n  \"type\" : \"$errorMessageObj.errorType\",\n  \"message\" : \"$errorMessageObj.message\",\n  \"request-id\" : \"$errorMessageObj.requestId\"\n}"
              }
            },
            ".*httpStatus\\\":404.*" : {
              "statusCode" : "404",
              "responseParameters" : {
                "method.response.header.Access-Control-Allow-Headers" : "'Content-Type,X-Amz-Date,Authorization,X-IO-Blackbox'",
                "method.response.header.Access-Control-Allow-Methods" : "'GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH'",
                "method.response.header.Access-Control-Allow-Origin" : "'*'"
              },
              "responseTemplates" : {
                "application/json" : "#set ($errorMessageObj = $util.parseJson($input.path('$.errorMessage')))\n{\n  \"type\" : \"$errorMessageObj.errorType\",\n  \"message\" : \"$errorMessageObj.message\",\n  \"request-id\" : \"$errorMessageObj.requestId\"\n}"
              }
            },
            ".*httpStatus\\\":409.*" : {
              "statusCode" : "409",
              "responseParameters" : {
                "method.response.header.Access-Control-Allow-Headers" : "'Content-Type,X-Amz-Date,Authorization,X-IO-Blackbox'",
                "method.response.header.Access-Control-Allow-Methods" : "'GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH'",
                "method.response.header.Access-Control-Allow-Origin" : "'*'"
              },
              "responseTemplates" : {
                "application/json" : "#set ($errorMessageObj = $util.parseJson($input.path('$.errorMessage')))\n{\n  \"type\" : \"$errorMessageObj.errorType\",\n  \"message\" : \"$errorMessageObj.message\",\n  \"request-id\" : \"$errorMessageObj.requestId\"\n}"
              }
            },
            ".*httpStatus\\\":500.*" : {
              "statusCode" : "500",
              "responseParameters" : {
                "method.response.header.Access-Control-Allow-Headers" : "'Content-Type,X-Amz-Date,Authorization,X-IO-Blackbox'",
                "method.response.header.Access-Control-Allow-Methods" : "'GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH'",
                "method.response.header.Access-Control-Allow-Origin" : "'*'"
              },
              "responseTemplates" : {
                "application/json" : "#set ($errorMessageObj = $util.parseJson($input.path('$.errorMessage')))\n{\n  \"type\" : \"$errorMessageObj.errorType\",\n  \"message\" : \"$errorMessageObj.message\",\n  \"request-id\" : \"$errorMessageObj.requestId\"\n}"
              }
            }
          },
          "type" : "aws"
        }
      }
    },
    "/merchant/{merchantId}/paymentLink" : {
      "summary" : "Provides a link that can be embedded in an invoice.",
      "description" : "PaymentLink allows a specific type of transaction that starts from an HTML link embedded in an invoice\nor payment flow. This link will initiate a transaction session specific for that invoice.\n",
      "post" : {
        "summary" : "POST creates a link to be embedded in an invoice.",
        "description" : "You can use the paymentLink resource to create links that can be embedded in invoices or payment flows. PaymentLink allows sending data that will\nmake it easier for the customer to complete the transaction. When you send additional information when creating a payment link,\nWisetack uses it to pre-fill transaction information and make the customer's experience easier.\n\nCreating a payment link requires a transaction amount and purpose.  Optional fields such as customer address, dob,\nand ssn as well as optional line item information is also supported. The POST returns a link that is specific for\nthat customer, merchant, and line items. When the customer clicks the link, they will proceed to a transaction flow specific to that transaction. A unique link will be created on each create. The link expires after 90 days.\n",
        "tags" : [ "PaymentLink" ],
        "parameters" : [ {
          "name" : "merchantId",
          "in" : "path",
          "description" : "Id for the merchant originating the transaction",
          "required" : true,
          "schema" : {
            "type" : "string"
          }
        } ],
        "requestBody" : {
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/PaymentLinkObject"
              }
            }
          }
        },
        "responses" : {
          "200" : {
            "description" : "Ok",
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/PaymentLinkObject"
                }
              }
            }
          },
          "400" : {
            "description" : "Bad Request."
          }
        }
      }
    },
    "/merchants/{merchantId}" : {
      "description" : "Resource for handling merchant onboarding and management.",
      "parameters" : [ {
        "name" : "merchantId",
        "in" : "path",
        "description" : "The unique identifier for the merchant.",
        "required" : true,
        "schema" : {
          "type" : "string"
        }
      } ],
      "options" : {
        "summary" : "CORS support",
        "description" : "Enable CORS by returning correct headers"
      },
      "get" : {
        "summary" : "GET retrieves merchant information based on merchant id.",
        "tags" : [ "Merchants" ],
        "responses" : {
          "200" : {
            "description" : "Ok",
            "headers" : {
              "Access-Control-Allow-Headers" : {
                "$ref" : "#/components/headers/accessControl"
              },
              "Access-Control-Allow-Methods" : {
                "$ref" : "#/components/headers/accessControl"
              },
              "Access-Control-Allow-Origin" : {
                "$ref" : "#/components/headers/accessControl"
              }
            },
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/MerchantGetResponse"
                }
              }
            }
          },
          "400" : {
            "description" : "Bad Request."
          }
        },
        "x-amazon-apigateway-integration" : {
          "uri" : "${lambda-arn-MerchantGetLambda}",
          "credentials" : "${api-role-arn}",
          "httpMethod" : "POST",
          "requestTemplates" : {
            "application/json" : "#set($allParams = $input.params()) {\"apiContext\":{\"apiId\":\"$context.apiId\", \"method\":\"$context.httpMethod\", \"sourceIp\":\"$context.identity.sourceIp\", \"userAgent\":\"$context.identity.userAgent\", \"path\":\"$context.path\", \"protocol\":\"$context.protocol\", \"requestId\":\"$context.requestId\", \"stage\":\"$context.stage\"}, #foreach($type in $allParams.keySet()) #set($params = $allParams.get($type)) \"$type\" : { \"parameterMap\" : { #foreach($paramName in $params.keySet()) \"$paramName\" : \"$util.escapeJavaScript($params.get($paramName))\" #if($foreach.hasNext), #end #end}}, #end \"body\" : $input.json('$')}"
          },
          "responses" : {
            "default" : {
              "statusCode" : "200",
              "responseParameters" : {
                "method.response.header.Access-Control-Allow-Headers" : "'Content-Type,X-Amz-Date,Authorization,X-IO-Blackbox'",
                "method.response.header.Access-Control-Allow-Methods" : "'GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH'",
                "method.response.header.Access-Control-Allow-Origin" : "'*'"
              }
            },
            ".*httpStatus\\\":400.*" : {
              "statusCode" : "400",
              "responseParameters" : {
                "method.response.header.Access-Control-Allow-Headers" : "'Content-Type,X-Amz-Date,Authorization,X-IO-Blackbox'",
                "method.response.header.Access-Control-Allow-Methods" : "'GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH'",
                "method.response.header.Access-Control-Allow-Origin" : "'*'"
              },
              "responseTemplates" : {
                "application/json" : "#set ($errorMessageObj = $util.parseJson($input.path('$.errorMessage')))\n{\n  \"type\" : \"$errorMessageObj.errorType\",\n  \"message\" : \"$errorMessageObj.message\",\n  \"request-id\" : \"$errorMessageObj.requestId\"\n}"
              }
            },
            ".*httpStatus\\\":401.*" : {
              "statusCode" : "401",
              "responseParameters" : {
                "method.response.header.Access-Control-Allow-Headers" : "'Content-Type,X-Amz-Date,Authorization,X-IO-Blackbox'",
                "method.response.header.Access-Control-Allow-Methods" : "'GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH'",
                "method.response.header.Access-Control-Allow-Origin" : "'*'"
              },
              "responseTemplates" : {
                "application/json" : "#set ($errorMessageObj = $util.parseJson($input.path('$.errorMessage')))\n{\n  \"type\" : \"$errorMessageObj.errorType\",\n  \"message\" : \"$errorMessageObj.message\",\n  \"request-id\" : \"$errorMessageObj.requestId\"\n}"
              }
            },
            ".*httpStatus\\\":403.*" : {
              "statusCode" : "403",
              "responseParameters" : {
                "method.response.header.Access-Control-Allow-Headers" : "'Content-Type,X-Amz-Date,Authorization,X-IO-Blackbox'",
                "method.response.header.Access-Control-Allow-Methods" : "'GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH'",
                "method.response.header.Access-Control-Allow-Origin" : "'*'"
              },
              "responseTemplates" : {
                "application/json" : "#set ($errorMessageObj = $util.parseJson($input.path('$.errorMessage')))\n{\n  \"type\" : \"$errorMessageObj.errorType\",\n  \"message\" : \"$errorMessageObj.message\",\n  \"request-id\" : \"$errorMessageObj.requestId\"\n}"
              }
            },
            ".*httpStatus\\\":404.*" : {
              "statusCode" : "404",
              "responseParameters" : {
                "method.response.header.Access-Control-Allow-Headers" : "'Content-Type,X-Amz-Date,Authorization,X-IO-Blackbox'",
                "method.response.header.Access-Control-Allow-Methods" : "'GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH'",
                "method.response.header.Access-Control-Allow-Origin" : "'*'"
              },
              "responseTemplates" : {
                "application/json" : "#set ($errorMessageObj = $util.parseJson($input.path('$.errorMessage')))\n{\n  \"type\" : \"$errorMessageObj.errorType\",\n  \"message\" : \"$errorMessageObj.message\",\n  \"request-id\" : \"$errorMessageObj.requestId\"\n}"
              }
            },
            ".*httpStatus\\\":409.*" : {
              "statusCode" : "409",
              "responseParameters" : {
                "method.response.header.Access-Control-Allow-Headers" : "'Content-Type,X-Amz-Date,Authorization,X-IO-Blackbox'",
                "method.response.header.Access-Control-Allow-Methods" : "'GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH'",
                "method.response.header.Access-Control-Allow-Origin" : "'*'"
              },
              "responseTemplates" : {
                "application/json" : "#set ($errorMessageObj = $util.parseJson($input.path('$.errorMessage')))\n{\n  \"type\" : \"$errorMessageObj.errorType\",\n  \"message\" : \"$errorMessageObj.message\",\n  \"request-id\" : \"$errorMessageObj.requestId\"\n}"
              }
            },
            ".*httpStatus\\\":500.*" : {
              "statusCode" : "500",
              "responseParameters" : {
                "method.response.header.Access-Control-Allow-Headers" : "'Content-Type,X-Amz-Date,Authorization,X-IO-Blackbox'",
                "method.response.header.Access-Control-Allow-Methods" : "'GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH'",
                "method.response.header.Access-Control-Allow-Origin" : "'*'"
              },
              "responseTemplates" : {
                "application/json" : "#set ($errorMessageObj = $util.parseJson($input.path('$.errorMessage')))\n{\n  \"type\" : \"$errorMessageObj.errorType\",\n  \"message\" : \"$errorMessageObj.message\",\n  \"request-id\" : \"$errorMessageObj.requestId\"\n}"
              }
            }
          },
          "type" : "aws"
        }
      }
    },
    "/subscribe" : {
      "post" : {
        "summary" : "POST to your webhook as specified in the callBackURL field in the Transactions POST.",
        "description" : "When you intially POST a new Transaction, you can supply a webhook callBackURL for that Transaction.\n\nEach time the status of a loan application changes, Wisetack sends a request to the URL specified in the\nTransactions POST. The request contains the new status and other information about the loan. When your\nwebhook is called, it will receive a StatusUpdateRequest.\n\nStatuses:\n\n* **Initiated:**  You sent a transaction to your customer but they have not submitted an application.\n\n* **Authorized:**  We approved the application but the customer has not accepted the loan documents.\n\n* **Declined:** We were unable to approved the application.\n\n* **Confirmed:** The customer has accepted the loan documents and confirmed the purchase.\n\n* **Settled:** We've sent the funds to your bank account.\n\n* **Refunded:** The customer requested and received a refund.\n\n* **Expired:** The customer did not complete the loan application before it expired.\n",
        "tags" : [ "Webhooks" ],
        "requestBody" : {
          "required" : true,
          "content" : {
            "application/json" : {
              "schema" : {
                "$ref" : "#/components/schemas/StatusUpdateRequest"
              }
            }
          }
        },
        "responses" : {
          "201" : {
            "description" : "Webhook created."
          }
        }
      }
    },
    "/merchants" : {
      "description" : "Resource for listing merchant onboarding and management.",
      "parameters" : [ {
        "in" : "query",
        "name" : "limit",
        "description" : "Maximum number of merchants to return.",
        "schema" : {
          "type" : "integer"
        },
        "required" : false
      }, {
        "in" : "query",
        "name" : "startingAfter",
        "description" : "List only merchants who initiated their onboard after this date.",
        "schema" : {
          "type" : "string"
        },
        "required" : false
      }, {
        "in" : "query",
        "name" : "endingBefore",
        "description" : "List only merchants who initiated their onboarding before this date.",
        "schema" : {
          "type" : "string"
        },
        "required" : false
      }, {
        "in" : "query",
        "name" : "transactionsEnabled",
        "description" : "Return for currently enabled merchants, true or false.",
        "schema" : {
          "type" : "string"
        },
        "required" : false
      } ],
      "options" : {
        "summary" : "CORS support",
        "description" : "Enable CORS by returning correct headers"
      },
      "get" : {
        "summary" : "GET retrieves a list of merchants.",
        "description" : "Lists all merchants on your Wisetack account. You can filter this list based on date and if their transaction initiation has or has not been enabled.\n",
        "tags" : [ "Merchants" ],
        "responses" : {
          "200" : {
            "description" : "Ok",
            "headers" : {
              "Access-Control-Allow-Headers" : {
                "$ref" : "#/components/headers/accessControl"
              },
              "Access-Control-Allow-Methods" : {
                "$ref" : "#/components/headers/accessControl"
              },
              "Access-Control-Allow-Origin" : {
                "$ref" : "#/components/headers/accessControl"
              }
            },
            "content" : {
              "application/json" : {
                "schema" : {
                  "$ref" : "#/components/schemas/MerchantGetResponse"
                }
              }
            }
          },
          "400" : {
            "description" : "Bad Request."
          }
        },
        "x-amazon-apigateway-integration" : {
          "uri" : "${lambda-arn-MerchantGetLambda}",
          "credentials" : "${api-role-arn}",
          "httpMethod" : "POST",
          "requestTemplates" : {
            "application/json" : "#set($allParams = $input.params()) {\"apiContext\":{\"apiId\":\"$context.apiId\", \"method\":\"$context.httpMethod\", \"sourceIp\":\"$context.identity.sourceIp\", \"userAgent\":\"$context.identity.userAgent\", \"path\":\"$context.path\", \"protocol\":\"$context.protocol\", \"requestId\":\"$context.requestId\", \"stage\":\"$context.stage\"}, #foreach($type in $allParams.keySet()) #set($params = $allParams.get($type)) \"$type\" : { \"parameterMap\" : { #foreach($paramName in $params.keySet()) \"$paramName\" : \"$util.escapeJavaScript($params.get($paramName))\" #if($foreach.hasNext), #end #end}}, #end \"body\" : $input.json('$')}"
          },
          "responses" : {
            "default" : {
              "statusCode" : "200",
              "responseParameters" : {
                "method.response.header.Access-Control-Allow-Headers" : "'Content-Type,X-Amz-Date,Authorization,X-IO-Blackbox'",
                "method.response.header.Access-Control-Allow-Methods" : "'GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH'",
                "method.response.header.Access-Control-Allow-Origin" : "'*'"
              }
            },
            ".*httpStatus\\\":400.*" : {
              "statusCode" : "400",
              "responseParameters" : {
                "method.response.header.Access-Control-Allow-Headers" : "'Content-Type,X-Amz-Date,Authorization,X-IO-Blackbox'",
                "method.response.header.Access-Control-Allow-Methods" : "'GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH'",
                "method.response.header.Access-Control-Allow-Origin" : "'*'"
              },
              "responseTemplates" : {
                "application/json" : "#set ($errorMessageObj = $util.parseJson($input.path('$.errorMessage')))\n{\n  \"type\" : \"$errorMessageObj.errorType\",\n  \"message\" : \"$errorMessageObj.message\",\n  \"request-id\" : \"$errorMessageObj.requestId\"\n}"
              }
            },
            ".*httpStatus\\\":401.*" : {
              "statusCode" : "401",
              "responseParameters" : {
                "method.response.header.Access-Control-Allow-Headers" : "'Content-Type,X-Amz-Date,Authorization,X-IO-Blackbox'",
                "method.response.header.Access-Control-Allow-Methods" : "'GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH'",
                "method.response.header.Access-Control-Allow-Origin" : "'*'"
              },
              "responseTemplates" : {
                "application/json" : "#set ($errorMessageObj = $util.parseJson($input.path('$.errorMessage')))\n{\n  \"type\" : \"$errorMessageObj.errorType\",\n  \"message\" : \"$errorMessageObj.message\",\n  \"request-id\" : \"$errorMessageObj.requestId\"\n}"
              }
            },
            ".*httpStatus\\\":403.*" : {
              "statusCode" : "403",
              "responseParameters" : {
                "method.response.header.Access-Control-Allow-Headers" : "'Content-Type,X-Amz-Date,Authorization,X-IO-Blackbox'",
                "method.response.header.Access-Control-Allow-Methods" : "'GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH'",
                "method.response.header.Access-Control-Allow-Origin" : "'*'"
              },
              "responseTemplates" : {
                "application/json" : "#set ($errorMessageObj = $util.parseJson($input.path('$.errorMessage')))\n{\n  \"type\" : \"$errorMessageObj.errorType\",\n  \"message\" : \"$errorMessageObj.message\",\n  \"request-id\" : \"$errorMessageObj.requestId\"\n}"
              }
            },
            ".*httpStatus\\\":404.*" : {
              "statusCode" : "404",
              "responseParameters" : {
                "method.response.header.Access-Control-Allow-Headers" : "'Content-Type,X-Amz-Date,Authorization,X-IO-Blackbox'",
                "method.response.header.Access-Control-Allow-Methods" : "'GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH'",
                "method.response.header.Access-Control-Allow-Origin" : "'*'"
              },
              "responseTemplates" : {
                "application/json" : "#set ($errorMessageObj = $util.parseJson($input.path('$.errorMessage')))\n{\n  \"type\" : \"$errorMessageObj.errorType\",\n  \"message\" : \"$errorMessageObj.message\",\n  \"request-id\" : \"$errorMessageObj.requestId\"\n}"
              }
            },
            ".*httpStatus\\\":409.*" : {
              "statusCode" : "409",
              "responseParameters" : {
                "method.response.header.Access-Control-Allow-Headers" : "'Content-Type,X-Amz-Date,Authorization,X-IO-Blackbox'",
                "method.response.header.Access-Control-Allow-Methods" : "'GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH'",
                "method.response.header.Access-Control-Allow-Origin" : "'*'"
              },
              "responseTemplates" : {
                "application/json" : "#set ($errorMessageObj = $util.parseJson($input.path('$.errorMessage')))\n{\n  \"type\" : \"$errorMessageObj.errorType\",\n  \"message\" : \"$errorMessageObj.message\",\n  \"request-id\" : \"$errorMessageObj.requestId\"\n}"
              }
            },
            ".*httpStatus\\\":500.*" : {
              "statusCode" : "500",
              "responseParameters" : {
                "method.response.header.Access-Control-Allow-Headers" : "'Content-Type,X-Amz-Date,Authorization,X-IO-Blackbox'",
                "method.response.header.Access-Control-Allow-Methods" : "'GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE, PATCH'",
                "method.response.header.Access-Control-Allow-Origin" : "'*'"
              },
              "responseTemplates" : {
                "application/json" : "#set ($errorMessageObj = $util.parseJson($input.path('$.errorMessage')))\n{\n  \"type\" : \"$errorMessageObj.errorType\",\n  \"message\" : \"$errorMessageObj.message\",\n  \"request-id\" : \"$errorMessageObj.requestId\"\n}"
              }
            }
          },
          "type" : "aws"
        }
      }
    }
  },
  "components" : {
    "headers" : {
      "accessControl" : {
        "content" : {
          "application/json" : {
            "schema" : {
              "type" : "string"
            }
          }
        }
      }
    },
    "responses" : {
      "CORSResponse" : {
        "description" : "Default responnse for CORS method",
        "headers" : {
          "Access-Control-Allow-Headers" : {
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "string"
                }
              }
            }
          },
          "Access-Control-Allow-Methods" : {
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "string"
                }
              }
            }
          },
          "Access-Control-Allow-Origin" : {
            "content" : {
              "application/json" : {
                "schema" : {
                  "type" : "string"
                }
              }
            }
          }
        }
      }
    },
    "schemas" : {
      "TransactionRequest" : {
        "properties" : {
          "transactionAmount" : {
            "type" : "string",
            "description" : "Required for POST. Includes two decimal points but no dollar symbol."
          },
          "mobileNumber" : {
            "type" : "string",
            "description" : "Required for POST. International phone numbers are supported. No formating should be included. Just the digits."
          },
          "loanPurpose" : {
            "type" : "string",
            "description" : "Required for POST. Currently this is freeform but will be enumerated in database in the future."
          },
          "serviceCompletedOn" : {
            "type" : "string",
            "description" : "Required by POST. The date when the merchant completes the service."
          },
          "callBackURL" : {
            "type" : "string",
            "description" : "Optional. URL to call on status change of transaction. See StatusUpdateRequest in the schema."
          },
          "selectedFinancialProduct" : {
            "type" : "string",
            "description" : "The merchant can have one or more financial products from which to choose for each transaction."
          },
          "firstName" : {
            "type" : "string"
          },
          "lastName" : {
            "type" : "string"
          },
          "email" : {
            "type" : "string"
          },
          "dob" : {
            "type" : "string",
            "description" : "Format is YYYY-MM-DD. Please use the whole format as shown below in the example."
          },
          "ssn4" : {
            "type" : "string"
          },
          "ssn" : {
            "type" : "string"
          },
          "streetAddress1" : {
            "type" : "string"
          },
          "streetAddress2" : {
            "type" : "string"
          },
          "city" : {
            "type" : "string"
          },
          "stateCode" : {
            "type" : "string"
          },
          "zip" : {
            "type" : "string",
            "description" : "Zip code can be either the full nine digits (nnnnn-mmmm) or just the five digit delivery area."
          },
          "employer" : {
            "type" : "string"
          },
          "annualIncomeBeforeTaxes" : {
            "type" : "string",
            "description" : "Includes the decimal point but no dollar sign."
          },
          "coborrowerMobileNumber" : {
            "type" : "string",
            "description" : "Coborrower mobile number. International phone numbers are supported. No formatted should be included. Just the digits."
          },
          "transactionLineItems" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/LoanApplicationLineItems"
            }
          }
        }
      },
      "TransactionResponse" : {
        "properties" : {
          "transactionId" : {
            "description" : "UUID uniquely identifying the transaction with changed status.",
            "type" : "string"
          },
          "changedStatus" : {
            "description" : "The new status of this loan application.",
            "type" : "string",
            "enum" : [ "initiated", "authorized", "confirmed", "settled", "refunded", "declined", "expired" ]
          },
          "date" : {
            "description" : "Date that status changed.",
            "type" : "string"
          },
          "requestedLoanAmount" : {
            "description" : "The original loan amount requested by the customer.",
            "type" : "string"
          },
          "approvedLoanAmount" : {
            "description" : "The loan amount approved for this user by Wisetack. Might be lower than originalLoanAmount in the event of a counter offer.",
            "type" : "string"
          },
          "settledLoanAmount" : {
            "description" : "Future. The loan amount that was paid to the merchant after the work was completed.",
            "type" : "string"
          },
          "refundAmount" : {
            "description" : "The amount, if any, that was refunded to the customer.",
            "type" : "string"
          },
          "maximumAmount" : {
            "description" : "Future. The largest transaction amount that can be offered to this consumer.",
            "type" : "string"
          },
          "consumer" : {
            "type" : "object",
            "properties" : {
              "fullName" : {
                "description" : "Customer's first and last name.",
                "type" : "string"
              },
              "email" : {
                "description" : "Customer's email.",
                "type" : "string"
              },
              "phone" : {
                "description" : "Customer's phone.",
                "type" : "string"
              },
              "zip" : {
                "description" : "Customer's postal code.",
                "type" : "string"
              }
            }
          },
          "loanPurpose" : {
            "description" : "Purpose of the loan as entered by merchant.",
            "type" : "string"
          },
          "serviceCompletedOn" : {
            "description" : "The date by which the service should be completed.",
            "type" : "string"
          },
          "tilaAcceptedOn" : {
            "description" : "The data the Truth In Lending document was accepted.",
            "type" : "string"
          },
          "createdAt" : {
            "description" : "The date the transaction was initiated.",
            "type" : "string"
          }
        }
      },
      "PaymentLinkObject" : {
        "properties" : {
          "paymentLink" : {
            "type" : "string",
            "description" : "This link is created and can be embedded in invoices. When the customer clicks this link, they will proceed to a web page that will initiate a transaction for that customer."
          },
          "transactionAmount" : {
            "type" : "string",
            "description" : "Required for POST. Includes two decimal points but no dollar symbol."
          },
          "mobileNumber" : {
            "type" : "string",
            "description" : "Optional. International phone numbers are supported. No formatted should be included. Just the digits."
          },
          "transactionPurpose" : {
            "type" : "string",
            "description" : "Required for POST. Currently this is freeform but will be enumerated in database in the future."
          },
          "firstName" : {
            "type" : "string",
            "description" : "Optional"
          },
          "lastName" : {
            "type" : "string",
            "description" : "Optional"
          },
          "email" : {
            "type" : "string",
            "description" : "Optional"
          },
          "dob" : {
            "type" : "string",
            "description" : "Optional. Format is YYYY-MM-DD. Please use the whole format as shown below in the example."
          },
          "ssn4" : {
            "type" : "string",
            "description" : "Optional."
          },
          "ssn" : {
            "type" : "string",
            "description" : "optional"
          },
          "streetAddress1" : {
            "type" : "string",
            "description" : "optional"
          },
          "streetAddress2" : {
            "type" : "string",
            "description" : "optional"
          },
          "city" : {
            "type" : "string",
            "description" : "optional"
          },
          "stateCode" : {
            "type" : "string",
            "description" : "optional"
          },
          "zip" : {
            "type" : "string",
            "description" : "Optional. Zip code can be either the full nine digits (nnnnn-mmmm) or just the five digit delivery area."
          },
          "employer" : {
            "type" : "string",
            "description" : "optional"
          },
          "annualIncomeBeforeTaxes" : {
            "type" : "string",
            "description" : "Optional. Includes the decimal point but no dollar sign."
          },
          "coborrowerMobileNumber" : {
            "type" : "string",
            "description" : "Optional. Coborrower mobile number. International phone numbers are supported. No formatted should be included. Just the digits."
          },
          "transactionLineItems" : {
            "type" : "array",
            "items" : {
              "$ref" : "#/components/schemas/LoanApplicationLineItems"
            }
          }
        },
        "example" : {
          "paymentLink" : "http://business.wisetack.us/loanApplicationId=80349125-3b0c-4fd6-b2ef-568a4844321d",
          "transactionAmount" : "1000.00",
          "mobileNumber" : 1235554567,
          "transactionPurpose" : "landscape",
          "firstName" : "Clark",
          "lastName" : "Smith",
          "email" : "casmith@example.com",
          "dob" : -535420800000,
          "ssn4" : 3333,
          "streetAddress" : "123 Ashton Street",
          "streetAddress2" : "Suite 13",
          "city" : "Auburn",
          "state" : "CA",
          "zip" : 95602,
          "annualIncomeBeforeTaxes" : "950000.00",
          "coborrowerMobileNumber" : 5555556767
        }
      },
      "MerchantGetResponse" : {
        "properties" : {
          "merchantId" : {
            "description" : "A UUID unique to the newly created merchant.",
            "type" : "string"
          },
          "onboardingDate" : {
            "description" : "Date this merchant was initially onboarded in YYYY-MM-DD format.",
            "type" : "string"
          },
          "transactionsEnabled" : {
            "description" : "Indicates whether this merchant has been fully onboarded and can initiate transactions.",
            "type" : "boolean"
          },
          "companyLegalOperatingName" : {
            "type" : "string"
          }
        }
      },
      "StatusUpdateRequest" : {
        "properties" : {
          "transactionId" : {
            "description" : "UUID uniquely identifying the transaction with changed status.",
            "type" : "string"
          },
          "changedStatus" : {
            "description" : "The new status of this loan application.",
            "type" : "string",
            "enum" : [ "initiated", "authorized", "confirmed", "settled", "refunded", "declined", "expired" ]
          },
          "date" : {
            "description" : "Date that status changed.",
            "type" : "string"
          },
          "requestedLoanAmount" : {
            "description" : "The original loan amount requested by the customer.",
            "type" : "string"
          },
          "approvedLoanAmount" : {
            "description" : "The loan amount approved for this user by Wisetack. Might be lower than originalLoanAmount in the event of a counter offer.",
            "type" : "string"
          },
          "settledLoanAmount" : {
            "description" : "Future. The loan amount that was paid to the merchant after the work was completed.",
            "type" : "string"
          },
          "refundAmount" : {
            "description" : "The amount, if any, that was refunded to the customer.",
            "type" : "string"
          },
          "maximumAmount" : {
            "description" : "Future. The largest transaction amount that can be offered to this consumer.",
            "type" : "string"
          },
          "consumer" : {
            "type" : "object",
            "properties" : {
              "fullName" : {
                "description" : "Customer's first and last name.",
                "type" : "string"
              },
              "email" : {
                "description" : "Customer's email.",
                "type" : "string"
              },
              "phone" : {
                "description" : "Customer's phone.",
                "type" : "string"
              },
              "zip" : {
                "description" : "Customer's postal code.",
                "type" : "string"
              }
            }
          },
          "loanPurpose" : {
            "description" : "Purpose of the loan as entered by merchant.",
            "type" : "string"
          },
          "serviceCompletedOn" : {
            "description" : "The date by which the service should be completed.",
            "type" : "string"
          },
          "tilaAcceptedOn" : {
            "description" : "The data the Truth In Lending document was accepted.",
            "type" : "string"
          },
          "createdAt" : {
            "description" : "The date the transaction was initiated.",
            "type" : "string"
          }
        }
      },
      "LoanApplicationLineItems" : {
        "properties" : {
          "productDescription" : {
            "type" : "string"
          },
          "SKU" : {
            "type" : "string"
          },
          "pricePerUnit" : {
            "type" : "string",
            "description" : "Includes the decimal point but no dollar sign."
          },
          "tax" : {
            "type" : "string",
            "description" : "Includes the decimal point but no dollar sign."
          },
          "discount" : {
            "type" : "string",
            "description" : "Includes the decimal point but no dollar sign."
          },
          "totalAmount" : {
            "type" : "string",
            "description" : "Includes the decimal point but no dollar sign."
          },
          "photo" : {
            "type" : "string",
            "description" : "To be fixed to use media attachment later."
          }
        },
        "example" : {
          "productDescription" : "labor",
          "SKU" : "none",
          "pricePerUnit" : "50000.00",
          "tax" : "na",
          "discount" : "5000.00",
          "totalAmount" : "55000.00"
        }
      },
      "MerchantTransactionsResponse" : {
        "description" : "All known information about a transaction for a merchant.",
        "type" : "object",
        "properties" : {
          "transactions" : {
            "type" : "array",
            "items" : {
              "type" : "object",
              "properties" : {
                "id" : {
                  "description" : "loan application short id",
                  "type" : "string",
                  "example" : "8519e81f"
                },
                "date" : {
                  "description" : "transaction date",
                  "type" : "string",
                  "example" : "8/30"
                },
                "name" : {
                  "description" : "consumer short name",
                  "type" : "string",
                  "example" : "E. Bode"
                },
                "amount" : {
                  "description" : "transaction amount",
                  "type" : "string",
                  "example" : "$3,425.00"
                },
                "status" : {
                  "$ref" : "#/components/schemas/TransactionStatus"
                },
                "loanStatus" : {
                  "description" : "loan internal status",
                  "type" : "string",
                  "example" : "OFFER_CONVERTED"
                },
                "offerId" : {
                  "description" : "selected loan offer ID",
                  "type" : "string",
                  "example" : "ebd271c2-ebf1-4575-a56d-526256f9551a"
                },
                "offerStatus" : {
                  "description" : "selected loan offer internal status",
                  "type" : "string",
                  "example" : "CONVERTED"
                },
                "loanPurpose" : {
                  "description" : "loan purpose",
                  "type" : "string"
                },
                "serviceCompletedOn" : {
                  "type" : "string",
                  "format" : "date-time",
                  "example" : "2019-08-30 07:00:00+0000"
                },
                "tilaAcceptedOn" : {
                  "type" : "string",
                  "format" : "date-time",
                  "example" : "2019-08-30 15:26:37+0000"
                },
                "createdAt" : {
                  "description" : "unix timestamp when transaction created",
                  "type" : "integer",
                  "example" : 1567178434626
                },
                "paymentId" : {
                  "description" : "payment ID",
                  "type" : "string",
                  "example" : "000000000000003#752fca11-3e7c-4b4e-91f3-629766be4422"
                },
                "paymentCreatedOn" : {
                  "description" : "payment creation date",
                  "type" : "string",
                  "format" : "date-time",
                  "example" : "2019-09-03 07:00:00+0000"
                },
                "consumer" : {
                  "type" : "object",
                  "properties" : {
                    "fullName" : {
                      "description" : "consumer full name",
                      "type" : "string"
                    },
                    "email" : {
                      "description" : "consumer email",
                      "type" : "string"
                    },
                    "phone" : {
                      "description" : "consumer phone",
                      "type" : "string",
                      "example" : 15555555552
                    },
                    "zip" : {
                      "description" : "consumer zip",
                      "type" : "string",
                      "example" : 84101
                    }
                  }
                },
                "statusHistory" : {
                  "type" : "array",
                  "items" : {
                    "type" : "object",
                    "properties" : {
                      "date" : {
                        "description" : "status set date",
                        "type" : "string",
                        "example" : "8/30"
                      },
                      "amount" : {
                        "description" : "transaction amount",
                        "type" : "string",
                        "example" : "$3,425.00"
                      },
                      "status" : {
                        "$ref" : "#/components/schemas/TransactionStatus"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "TransactionStatus" : {
        "description" : "transaction status to display in merchant UI",
        "type" : "string",
        "enum" : [ "Initiated", "Loan confirmed", "Authorized", "Expired", "Rejected", "Declined", "Settled" ]
      },
      "Error" : {
        "type" : "object",
        "properties" : {
          "message" : {
            "type" : "string"
          },
          "type" : {
            "type" : "string"
          },
          "request-id" : {
            "type" : "string"
          }
        }
      }
    }
  }
}